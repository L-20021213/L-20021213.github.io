<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>在线代码编辑器</title><link rel="icon" type="image/ico" href="https://cdn.siax.cn/npm/picture-sianx@1.1.2/img/6945257127.png"><script src="https://cdn.tailwindcss.com"></script><link href="https://cdn.siax.cn/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet"><script>tailwind.config={theme:{extend:{colors:{primary:"#165DFF",secondary:"#36CFC9",success:"#52C41A",error:"#F5222D",warning:"#FAAD14",dark:"#1D2129",light:"#F2F3F5",editor:"#F7F8FA"},fontFamily:{code:["Consolas","Monaco","monospace"]}}}}</script><style type="text/tailwindcss">@layer utilities {
            .editor-shadow {
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            }
            .tab-active {
                @apply bg-white border-b-2 border-primary text-primary;
            }
            .console-entry {
                @apply py-1 px-3 text-sm border-b border-gray-800;
            }
        }</style></head><body class="bg-gray-50 text-dark min-h-screen flex flex-col"><header class="bg-white border-b border-gray-200 py-3 px-4 shadow-sm"><div class="container mx-auto flex flex-wrap justify-between items-center gap-3"><h1 class="text-xl font-bold text-primary flex items-center"><i class="fa fa-code mr-2"></i> 在线代码编辑器</h1><div class="flex gap-2 flex-wrap"><div class="flex items-center bg-gray-100 px-3 py-2 rounded-md"><label class="relative inline-flex items-center cursor-pointer mr-2"><input type="checkbox" id="realtime-preview" class="sr-only peer" checked><div class="w-9 h-5 bg-gray-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"></div></label> <span class="text-sm">实时预览</span></div><button id="run-btn" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-md flex items-center transition-all"><i class="fa fa-play mr-1"></i> 运行</button> <button id="clear-btn" class="bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-md flex items-center transition-all"><i class="fa fa-eraser mr-1"></i> 清空代码</button> <button id="toggle-console" class="bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-md flex items-center transition-all"><i class="fa fa-terminal mr-1"></i> 控制台</button></div></div></header><main class="container mx-auto p-4 md:p-6 flex-1 flex flex-col lg:flex-row gap-6"><div class="w-full lg:w-1/2 flex flex-col h-[60vh]"><div class="flex border-b border-gray-200 bg-gray-100"><button class="tab-btn tab-active px-4 py-2 font-medium text-sm" data-target="html-editor">HTML</button> <button class="tab-btn px-4 py-2 font-medium text-sm text-gray-600 hover:text-gray-900" data-target="css-editor">CSS</button> <button class="tab-btn px-4 py-2 font-medium text-sm text-gray-600 hover:text-gray-900" data-target="js-editor">JavaScript</button></div><div class="flex-1 bg-white border border-gray-200 border-t-0 rounded-b-md overflow-hidden"><div id="html-editor" class="editor-pane h-full flex flex-col"><textarea id="html-code" class="flex-1 w-full p-4 font-code text-sm focus:outline-none resize-none" placeholder="输入HTML代码..."></textarea></div><div id="css-editor" class="editor-pane h-full flex flex-col hidden"><textarea id="css-code" class="flex-1 w-full p-4 font-code text-sm focus:outline-none resize-none" placeholder="输入CSS代码..."></textarea></div><div id="js-editor" class="editor-pane h-full flex flex-col hidden"><textarea id="js-code" class="flex-1 w-full p-4 font-code text-sm focus:outline-none resize-none" placeholder="输入JavaScript代码..."></textarea></div></div></div><div class="w-full lg:w-1/2 flex flex-col h-[60vh]"><div class="flex-1 flex flex-col"><div class="bg-gray-100 border border-gray-200 border-b-0 px-4 py-2 font-medium text-sm rounded-t-md flex justify-between items-center"><div class="flex items-center"><i class="fa fa-eye mr-1"></i> 预览效果</div><div id="preview-status" class="text-xs text-gray-500">实时预览已开启</div></div><div class="flex-1 bg-white border border-gray-200 border-t-0 overflow-hidden relative"><iframe id="preview-frame" class="w-full h-full" sandbox="allow-scripts allow-forms allow-same-origin"></iframe><div id="preview-placeholder" class="absolute inset-0 flex items-center justify-center text-gray-400"><p>开始编辑代码查看效果</p></div></div></div><div id="console-container" class="h-48 border border-gray-200 bg-gray-50 mt-4 rounded-md overflow-hidden hidden"><div class="bg-gray-700 text-white px-4 py-2 text-sm flex justify-between items-center"><div class="flex items-center"><i class="fa fa-terminal mr-2"></i> 控制台输出</div><div class="flex gap-2"><button id="clear-console" class="text-xs hover:text-gray-200"><i class="fa fa-trash-o"></i> 清空</button></div></div><div id="console-output" class="font-code overflow-y-auto h-[calc(100%-32px)] bg-gray-900 text-gray-100 text-sm"><div class="console-entry text-gray-400">控制台已准备就绪</div></div></div></div></main><footer class="mt-auto py-4 px-4 text-center text-gray-500 text-sm"><p>实时预览功能会在您编辑代码时自动更新效果 | 控制台会显示代码运行日志和错误</p></footer><script>let consoleVisible=!1,realtimeEnabled=!0,isRunning=!1;function debounce(e,n){let t;return function(...o){clearTimeout(t),t=setTimeout((()=>e.apply(this,o)),n)}}function addToConsole(e,n="log"){const t=document.getElementById("console-output"),o=(new Date).toLocaleTimeString();let c="console-entry",d='<i class="fa fa-info-circle mr-2"></i>';switch(n){case"error":c+=" text-error",d='<i class="fa fa-exclamation-circle mr-2"></i>';break;case"warn":c+=" text-warning",d='<i class="fa fa-exclamation-triangle mr-2"></i>';break;case"success":c+=" text-success",d='<i class="fa fa-check-circle mr-2"></i>'}const a=document.createElement("div");a.className=c,a.innerHTML=`<span class="text-gray-500 mr-2">[${o}]</span>${d}${formatConsoleMessage(e)}`,t.appendChild(a),t.scrollTop=t.scrollHeight}function formatConsoleMessage(e){return"object"==typeof e?`<pre class="mt-1 ml-6 text-gray-300">${JSON.stringify(e,null,2)}</pre>`:e}function runCode(e=!1){if(!e&&!realtimeEnabled)return;if(isRunning)return;isRunning=!0;const n=document.getElementById("html-code").value,t=document.getElementById("css-code").value,o=document.getElementById("js-code").value,c=document.getElementById("preview-frame"),d=document.getElementById("preview-placeholder"),a=c.contentDocument||c.contentWindow.document;d.style.display="none";try{const c=`\n                    <!DOCTYPE html>\n                    <html>\n                    <head>\n                        <meta charset="UTF-8">\n                        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n                        <style>${t}</style>\n                    </head>\n                    <body>\n                        ${n}\n                        <script>\n                            // 重写console方法，将输出发送到父窗口\n                            const originalConsole = { ...console };\n                            \n                            ['log', 'error', 'warn', 'info'].forEach(method => {\n                                console[method] = function(...args) {\n                                    originalConsole[method].apply(console, args);\n                                    window.parent.postMessage({\n                                        type: 'console',\n                                        method: method,\n                                        args: args.map(arg => {\n                                            // 简单序列化对象\n                                            try {\n                                                return typeof arg === 'object' ? JSON.stringify(arg) : arg;\n                                            } catch (e) {\n                                                return arg.toString();\n                                            }\n                                        })\n                                    }, '*');\n                                };\n                            });\n                            \n                            // 捕获全局错误\n                            window.addEventListener('error', function(e) {\n                                window.parent.postMessage({\n                                    type: 'error',\n                                    message: e.message,\n                                    filename: e.filename,\n                                    lineno: e.lineno,\n                                    colno: e.colno\n                                }, '*');\n                            });\n                            \n                            // 执行用户代码\n                            ${o}\n                        <\/script>\n                    </body>\n                    </html>\n                `;a.open(),a.write(c),a.close(),e&&addToConsole("代码已手动运行","success")}catch(e){addToConsole(`代码执行错误: ${e.message}`,"error")}finally{isRunning=!1}}document.querySelectorAll(".tab-btn").forEach((e=>{e.addEventListener("click",(function(){document.querySelectorAll(".tab-btn").forEach((e=>{e.classList.remove("tab-active"),e.classList.add("text-gray-600","hover:text-gray-900")})),this.classList.add("tab-active"),this.classList.remove("text-gray-600","hover:text-gray-900"),document.querySelectorAll(".editor-pane").forEach((e=>{e.classList.add("hidden")}));const e=this.getAttribute("data-target");document.getElementById(e).classList.remove("hidden")}))})),document.getElementById("toggle-console").addEventListener("click",(function(){const e=document.getElementById("console-container");consoleVisible=!consoleVisible,consoleVisible?(e.classList.remove("hidden"),this.classList.add("bg-primary/10","text-primary"),this.classList.remove("bg-gray-200","hover:bg-gray-300")):(e.classList.add("hidden"),this.classList.remove("bg-primary/10","text-primary"),this.classList.add("bg-gray-200","hover:bg-gray-300"))})),document.getElementById("realtime-preview").addEventListener("change",(function(){realtimeEnabled=this.checked;const e=document.getElementById("preview-status");realtimeEnabled?(e.textContent="实时预览已开启",e.classList.remove("text-warning"),runCode()):(e.textContent='实时预览已关闭 (点击"运行"更新)',e.classList.add("text-warning"))})),document.getElementById("clear-console").addEventListener("click",(function(){document.getElementById("console-output").innerHTML='<div class="console-entry text-gray-400">控制台已清空</div>'})),document.getElementById("run-btn").addEventListener("click",(()=>runCode(!0))),window.addEventListener("message",(function(e){"console"===e.data.type?e.data.args.forEach((n=>{try{addToConsole(JSON.parse(n),e.data.method)}catch(t){addToConsole(n,e.data.method)}})):"error"===e.data.type&&addToConsole(`运行时错误: ${e.data.message} (行: ${e.data.lineno}, 列: ${e.data.colno})`,"error")})),document.getElementById("clear-btn").addEventListener("click",(function(){if(confirm("确定要清空所有代码吗？")){document.getElementById("html-code").value="",document.getElementById("css-code").value="",document.getElementById("js-code").value="";const e=document.getElementById("preview-frame"),n=document.getElementById("preview-placeholder"),t=e.contentDocument||e.contentWindow.document;t.open(),t.write(""),t.close(),n.style.display="flex";document.getElementById("console-output").innerHTML='<div class="console-entry text-gray-400">控制台已准备就绪</div>',isRunning=!1,addToConsole("所有代码已清空","info")}}));const debouncedRunCode=debounce((()=>runCode()),300);document.getElementById("html-code").addEventListener("input",debouncedRunCode),document.getElementById("css-code").addEventListener("input",debouncedRunCode),document.getElementById("js-code").addEventListener("input",debouncedRunCode),document.addEventListener("DOMContentLoaded",(function(){document.getElementById("html-code").value='<!DOCTYPE html>\n<html>\n<head>\n    <title>实时预览示例</title>\n</head>\n<body>\n    <h1 class="title">Hello, 实时编辑!</h1>\n    <p>尝试修改下面的代码，看看实时变化：</p>\n    <div class="counter">\n        <p>点击次数: <span id="count">0</span></p>\n        <button id="increment">增加</button>\n        <button id="decrement">减少</button>\n    </div>\n</body>\n</html>',document.getElementById("css-code").value=".title {\n    color: #165DFF;\n    text-align: center;\n}\n\nbody {\n    font-family: Arial, sans-serif;\n    max-width: 800px;\n    margin: 0 auto;\n    padding: 20px;\n}\n\n.counter {\n    margin: 20px auto;\n    text-align: center;\n    padding: 20px;\n    border: 1px solid #eee;\n    border-radius: 5px;\n}\n\n#count {\n    font-size: 24px;\n    font-weight: bold;\n    color: #F5222D;\n}\n\nbutton {\n    background-color: #36CFC9;\n    border: none;\n    padding: 8px 16px;\n    border-radius: 4px;\n    cursor: pointer;\n    margin: 0 5px;\n}\n\nbutton:hover {\n    background-color: #165DFF;\n    color: white;\n}",document.getElementById("js-code").value="// 计数器逻辑\nlet count = 0;\nconst countEl = document.getElementById('count');\n\n// 控制台输出初始信息\nconsole.log('计数器已初始化');\nconsole.log('当前计数:', count);\n\n// 增加按钮事件\ndocument.getElementById('increment').addEventListener('click', function() {\n    count++;\n    countEl.textContent = count;\n    console.log('计数增加到:', count);\n});\n\n// 减少按钮事件\ndocument.getElementById('decrement').addEventListener('click', function() {\n    count--;\n    countEl.textContent = count;\n    console.log('计数减少到:', count);\n    \n    // 负数时发出警告\n    if (count < 0) {\n        console.warn('计数已为负数!');\n    }\n});",runCode()}))</script></body></html>