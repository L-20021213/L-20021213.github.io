
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç™¾åˆ†æ¯” & æ‰“æŠ˜è®¡ç®—å™¨</title>
  <link rel="icon" type="image/ico" href="https://cdn.jsdelivr.net/npm/picture-sianx@1.1.2/img/6945257127.png">
  <style>
    /* å…¨å±€è®¾ç½®ï¼Œé˜²æ­¢å†…è¾¹è·å’Œè¾¹æ¡†å½±å“å®½åº¦ */
    *, *::before, *::after {
      box-sizing: border-box;
    }

    :root {
      --primary-color: #2196F3;
      --error-color: #ff4444;
      --success-color: #00C851;
      --border-radius: 0.5rem;
      --input-padding: 0.625rem;
      --font-size: 1rem;
    }

    html, body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      background: #fff;
    }

    /* å±…ä¸­å®¹å™¨ï¼Œä¿è¯å·¦å³ç•™ç™½ */
    .container {
      max-width: 600px;
      width: 100%;
      margin: 1.25rem auto;
      padding: 0 1rem;
    }

    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      line-height: 1.6;
    }

    h1, h2 {
      text-align: center;
    }

    .calculator-section {
      background: #f8f9fa;
      border-radius: var(--border-radius);
      padding: 1.25rem;
      margin: 1.25rem 0;
      box-shadow: 0 0.125rem 0.5rem rgba(0, 0, 0, 0.1);
      width: 100%;
    }

    .input-group {
      margin: 1rem 0;
      display: flex;
      align-items: center;
      gap: 0.625rem;
      flex-wrap: wrap;
      width: 100%;
    }

    .input-group input,
    .input-group select,
    .result-box {
      flex: 1 1 140px;
      min-width: 100px;
      padding: var(--input-padding);
      font-size: var(--font-size);
      border: 0.125rem solid #ddd;
      border-radius: var(--border-radius);
      transition: border-color 0.3s;
      background: #fff;
    }

    .input-group input:focus,
    .input-group select:focus {
      border-color: var(--primary-color);
      outline: none;
    }

    .result-box {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 120px;
      height: 2.5rem;
      border: 0.125rem solid var(--primary-color);
      color: var(--primary-color);
      font-weight: bold;
    }

    .error-message {
      color: var(--error-color);
      font-size: 0.875rem;
      margin-top: 0.3125rem;
      height: 1.25rem;
      width: 100%;
    }

    button {
      background: var(--primary-color);
      color: #fff;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: transform 0.2s;
      font-size: var(--font-size);
      display: block;
      margin: 1.25rem auto;
    }

    button:hover {
      transform: translateY(-0.125rem);
    }

    @media (max-width: 600px) {
      .input-group {
        flex-direction: column;
        align-items: stretch;
      }
      .input-group input,
      .input-group select,
      .result-box {
        flex: unset;
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ”¢ ç™¾åˆ†æ¯” & æ‰“æŠ˜è®¡ç®—å™¨</h1>

    <!-- ç™¾åˆ†æ¯”è®¡ç®—æ¨¡å— -->
    <div class="calculator-section">
      <h2>è®¡ç®—ç™¾åˆ†æ¯”å€¼</h2>
      <div class="input-group">
        <input type="number" id="value1" placeholder="æ•°å€¼">
        <span>çš„</span>
        <input type="number" id="percent1" placeholder="ç™¾åˆ†æ¯”">
        <span>% =</span>
        <div class="result-box" id="result1"></div>
        <div class="error-message" id="error1"></div>
      </div>
    </div>

    <!-- è®¡ç®—å æ¯”ç‡ -->
    <div class="calculator-section">
      <h2>è®¡ç®—å æ¯”ç‡</h2>
      <div class="input-group">
        <input type="number" id="part" placeholder="éƒ¨åˆ†å€¼">
        <span>å </span>
        <input type="number" id="whole" placeholder="æ€»å€¼">
        <span>çš„ç™¾åˆ†æ¯” =</span>
        <div class="result-box" id="result2"></div>
        <div class="error-message" id="error2"></div>
      </div>
    </div>

    <!-- åæ¨åŸå§‹æ•°å€¼ -->
    <div class="calculator-section">
      <h2>åæ¨åŸå§‹æ•°å€¼</h2>
      <div class="input-group">
        <input type="number" id="knownValue" placeholder="å·²çŸ¥å€¼">
        <span>æ˜¯åŸæ•°çš„</span>
        <input type="number" id="percent3" placeholder="ç™¾åˆ†æ¯”">
        <span>% â†’ åŸæ•° =</span>
        <div class="result-box" id="result3"></div>
        <div class="error-message" id="error3"></div>
      </div>
    </div>

    <!-- è®¡ç®—å˜åŒ–ç‡ -->
    <div class="calculator-section">
      <h2>è®¡ç®—å˜åŒ–ç‡</h2>
      <div class="input-group">
        <input type="number" id="oldValue" placeholder="æ—§å€¼">
        <span>â†’</span>
        <input type="number" id="newValue" placeholder="æ–°å€¼">
        <span>å˜åŒ–ç‡ =</span>
        <div class="result-box" id="result4"></div>
        <div class="error-message" id="error4"></div>
      </div>
    </div>

    <!-- å«å¢å‡è®¡ç®— -->
    <div class="calculator-section">
      <h2>å«å¢å‡è®¡ç®—</h2>
      <div class="input-group">
        <input type="number" id="base" placeholder="åŸºç¡€å€¼">
        <select id="operation">
          <option value="+">å¢åŠ </option>
          <option value="-">å‡å°‘</option>
        </select>
        <input type="number" id="percent5" placeholder="ç™¾åˆ†æ¯”">
        <span>% â†’ ç»“æœ =</span>
        <div class="result-box" id="result5"></div>
        <div class="error-message" id="error5"></div>
      </div>
    </div>

    <!-- æ‰“æŠ˜è®¡ç®—æ¨¡å— -->
    <div class="calculator-section">
      <h2>æ‰“æŠ˜è®¡ç®—</h2>
      <div class="input-group">
        <input type="number" id="originalAmount" placeholder="åŸå§‹é‡‘é¢">
        <span>æŠ˜æ‰£</span>
        <input type="number" id="discount" placeholder="è¯·è¾“å…¥æŠ˜æ‰£ï¼ˆå¦‚95æˆ–9.5ï¼‰">
        <span>æŠ˜åé‡‘é¢ =</span>
        <div class="result-box" id="resultDiscount"></div>
        <div class="error-message" id="errorDiscount"></div>
      </div>
    </div>

    <button class="clear-btn" onclick="clearAll()">ğŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰æ•°æ®</button>
  </div>

  <script>
    const calculator = {
      // é€šç”¨éªŒè¯æ–¹æ³•
      validate: (value, isZeroAllowed = true) => {
        if (value === '') return { valid: false };
        const num = parseFloat(value);
        return {
          valid: !isNaN(num) && (isZeroAllowed || num !== 0),
          value: num
        };
      },

      // è®¡ç®—ç™¾åˆ†æ¯”å€¼
      calcPercentage: () => {
        const val1 = calculator.validate(document.getElementById('value1').value);
        const val2 = calculator.validate(document.getElementById('percent1').value);
        const result = document.getElementById('result1');
        const error = document.getElementById('error1');

        if (val1.valid && val2.valid) {
          result.textContent = (val1.value * val2.value / 100).toFixed(2);
          error.textContent = '';
        } else {
          result.textContent = '';
          error.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆæ•°å­—';
        }
      },

      // è®¡ç®—å æ¯”ç‡
      calcProportion: () => {
        const part = calculator.validate(document.getElementById('part').value);
        const whole = calculator.validate(document.getElementById('whole').value, false);
        const result = document.getElementById('result2');
        const error = document.getElementById('error2');

        if (part.valid && whole.valid) {
          result.textContent = `${(part.value / whole.value * 100).toFixed(2)}%`;
          error.textContent = '';
        } else {
          result.textContent = '';
          error.textContent = whole.valid ? 'è¯·è¾“å…¥æœ‰æ•ˆæ•°å­—' : 'æ€»å€¼ä¸èƒ½ä¸ºé›¶';
        }
      },

      // åæ¨åŸæ•°
      calcOriginal: () => {
        const known = calculator.validate(document.getElementById('knownValue').value);
        const percent = calculator.validate(document.getElementById('percent3').value, false);
        const result = document.getElementById('result3');
        const error = document.getElementById('error3');

        if (known.valid && percent.valid) {
          result.textContent = (known.value / (percent.value / 100)).toFixed(2);
          error.textContent = '';
        } else {
          result.textContent = '';
          error.textContent = percent.valid ? 'è¯·è¾“å…¥æœ‰æ•ˆæ•°å­—' : 'ç™¾åˆ†æ¯”ä¸èƒ½ä¸ºé›¶';
        }
      },

      // è®¡ç®—å˜åŒ–ç‡
      calcChange: () => {
        const oldVal = calculator.validate(document.getElementById('oldValue').value, false);
        const newVal = calculator.validate(document.getElementById('newValue').value);
        const result = document.getElementById('result4');
        const error = document.getElementById('error4');

        if (oldVal.valid && newVal.valid) {
          const change = ((newVal.value - oldVal.value) / oldVal.value * 100).toFixed(2);
          result.textContent = `${change}%`;
          error.textContent = '';
        } else {
          result.textContent = '';
          error.textContent = oldVal.valid ? 'è¯·è¾“å…¥æœ‰æ•ˆæ•°å­—' : 'æ—§å€¼ä¸èƒ½ä¸ºé›¶';
        }
      },

      // å¢å‡è®¡ç®—
      calcAdjustment: () => {
        const base = calculator.validate(document.getElementById('base').value);
        const percent = calculator.validate(document.getElementById('percent5').value);
        const operation = document.getElementById('operation').value;
        const result = document.getElementById('result5');
        const error = document.getElementById('error5');

        if (base.valid && percent.valid) {
          const multiplier = 1 + (operation === '+' ? percent.value / 100 : -percent.value / 100);
          result.textContent = (base.value * multiplier).toFixed(2);
          error.textContent = '';
        } else {
          result.textContent = '';
          error.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆæ•°å­—';
        }
      },

      // è®¡ç®—æ‰“æŠ˜åçš„é‡‘é¢
      calcDiscount: () => {
        const original = calculator.validate(document.getElementById('originalAmount').value);
        const discount = calculator.validate(document.getElementById('discount').value);
        const result = document.getElementById('resultDiscount');
        const error = document.getElementById('errorDiscount');

        if (original.valid && discount.valid) {
          let factor;
          // å¦‚æœæŠ˜æ‰£å€¼ >= 10 åˆ™è®¤ä¸ºè¾“å…¥ä¸ºç™¾åˆ†æ¯”å½¢å¼ï¼ˆå¦‚ 95 æŠ˜ï¼‰ï¼Œå¦åˆ™è®¤ä¸ºè¾“å…¥ä¸ºæŠ˜æ•°ï¼ˆå¦‚ 9.5 æŠ˜ï¼‰
          factor = discount.value >= 10 ? discount.value / 100 : discount.value / 10;
          result.textContent = (original.value * factor).toFixed(2);
          error.textContent = '';
        } else {
          result.textContent = '';
          error.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆæ•°å­—';
        }
      }
    };

    // æ‰¹é‡è°ƒç”¨æ‰€æœ‰è®¡ç®—å‡½æ•°
    function runCalculators() {
      calculator.calcPercentage();
      calculator.calcProportion();
      calculator.calcOriginal();
      calculator.calcChange();
      calculator.calcAdjustment();
      calculator.calcDiscount();
    }

    // ç»‘å®šäº‹ä»¶ç›‘å¬ï¼ˆè¾“å…¥æ—¶è§¦å‘é‡æ–°è®¡ç®—ï¼‰
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('input, select').forEach(element => {
        element.addEventListener('input', runCalculators);
      });
    });

    // æ¸…é™¤åŠŸèƒ½ï¼Œæ¸…ç©ºæ‰€æœ‰è¾“å…¥æ¡†å’Œç»“æœæ˜¾ç¤º
    function clearAll() {
      document.querySelectorAll('input').forEach(i => i.value = '');
      document.querySelectorAll('.result-box').forEach(r => r.textContent = '');
      document.querySelectorAll('.error-message').forEach(e => e.textContent = '');
    }
  </script>
</body>
</html>


